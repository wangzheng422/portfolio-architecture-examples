= SCADA interface modernisation
Ricardo Garcia Cavero @rgarciac
:homepage: https://gitlab.com/osspa/portfolio-architecture-examples
:imagesdir: images
:icons: font
:source-highlighter: prettify
:toc: left
:toclevels: 5


_Some details will differ based on the requirements of a specific implementation but all portfolio architectures generalize one or more successful deployments of a use case._

*Use case:* Provide interfaces with SCADA systems that are compliant with NERC regulations, creating different layers
of API gateways to protect business service depending on the network zones.

*Background:* SCADA systems are used extensively in many verticals, one of the main adopters and users being utility companies. There are several generation of SCADA devices and they typically coexist in the IT landscapes of companies, so there is a need to be able to communicate with all of them in a seamless, flexible and transparent way that allows developers to create new applications without needing to know the exact details and that can be reused and re not just ad-hoc creations for a particular device. 

== Solution overview
This Portfolio Architecture targets energy providers in North America that need to be compliant with NERC regulations
and in order to achieve this they decide to modernize the interfaces between their business applications and their
SCADA systems also for a better consumption of information that can be used in combination with AI/ML and decision
management tools to better address customer needs.

====
*SCADA interface modernisation*

. Modernize access to critical network equipments and SCADA systems
. Compliance to relevant international industry standards
. Enablement of business agility by standardizing access to old and/or heterogeneous systems using messaging and APIs
====


--
image:https://gitlab.com/osspa/portfolio-architecture-examples/-/raw/main/images/intro-marketectures/scada-interface-marketing-slide.png[alt="Architecture of an API based integration platform for interaction with SCADA devices for electricity providers", width=700]
--

== Summary video
video::-q66NGNGq-s[youtube]

== Logical diagrams

--
image:https://gitlab.com/osspa/portfolio-architecture-examples/-/raw/main/images/logical-diagrams/scada-interfaces-ld-general.png[alt="Overall view of Red Hat OpenShift clusters in the different separated network zones", width=700]

image:https://gitlab.com/osspa/portfolio-architecture-examples/-/raw/main/images/logical-diagrams/scada-interfaces-ld-nerc.png[alt="Red Hat OpenShift cluster in the NERC/electric network zone that connects to the SCADA devices", width=700]

image:https://gitlab.com/osspa/portfolio-architecture-examples/-/raw/main/images/logical-diagrams/scada-interfaces-ld-enterprise.png[alt="Red Hat OpenShift cluster in the enterprise/internal network zone that gets the data from the NERC/electric zone", width=700]

image:https://gitlab.com/osspa/portfolio-architecture-examples/-/raw/main/images/logical-diagrams/scada-interfaces-ld-control.png[alt="Red Hat OpenShift cluster control plane with RHACM and RHACS", width=700]
--

== The technology
The following technology was chosen for this solution:

====
https://www.redhat.com/en/technologies/cloud-computing/openshift/try-it?intcmp=7013a00000318EWAAY[*Red Hat OpenShift*] provides the platform on which both the applications that are in the electric zone and retrieve data from the SCADA devices and the business apps that are in the enterprise zone run.

https://www.redhat.com/en/products/integration?intcmp=7013a00000318EWAAY[*Red Hat Integration*] makes psossible the communication between the apps in the two separated network zones by using AMQ message queues and brokers. It is delpoyed on top of Red Hat OpenShift.

https://www.redhat.com/en/technologies/management/ansible?intcmp=7013a00000318EWAAY[*Red Hat Ansible Automation Platform*] is used to automate the compliance of the OpenShift clusters with the security policies that are defined.

https://www.redhat.com/en/technologies/linux-platforms/enterprise-linux?intcmp=7013a00000318EWAAY[*Red Hat Enterprise Linux*] is the foundation for deploying and running the Red Hat OpenShift clusters.
====

== Architectures
=== SCADA interfaces network
--
image:https://gitlab.com/osspa/portfolio-architecture-examples/-/raw/main/images/schematic-diagrams/scada-interfaces-network-sd-general.png[alt="Overall network connections between the Red Hat OpenShift clusters", width=700]
--

There are two segregated networks, one where the SCADA devices and the applications that talk to them reside (NERC or electric zone) and another one where the business applications are (enterprise or internal zone).

=== SCADA interfaces enterprise network
--
image:https://gitlab.com/osspa/portfolio-architecture-examples/-/raw/main/images/schematic-diagrams/scada-interfaces-network-sd-enterprise.png[alt="Network connections in the NERC/electric zone", width=700]
--

The Red Hat OpenShift cluster deployed here hosts the business application that consume data from the applications in the electric zone, mainly for analytics use.

=== SCADA interfaces electric network
--
image:https://gitlab.com/osspa/portfolio-architecture-examples/-/raw/main/images/schematic-diagrams/scada-interfaces-network-sd-nerc.png[alt="Network connections in the enterprise/internal zone", width=700]
--

The SCADA devices are in this network and also the Red Hat OpenShift cluster where the applications that obtain data directly from them are.

=== SCADA interfaces data
--
image:https://gitlab.com/osspa/portfolio-architecture-examples/-/raw/main/images/schematic-diagrams/scada-interfaces-data-sd-general.png[alt="Data flow trhough the Red Hat OpenShift clusters including the control plane", width=700]

image:https://gitlab.com/osspa/portfolio-architecture-examples/-/raw/main/images/schematic-diagrams/scada-interfaces-data-sd-nerc.png[alt="Data flow between the SCADA devices and the NERC/electric zone Red Hat OpenShift cluster", width=700]

image:https://gitlab.com/osspa/portfolio-architecture-examples/-/raw/main/images/schematic-diagrams/scada-interfaces-data-sd-enterprise.png[alt="Data flow between the NERC/electric zone and the enterprise/internal zone Red Hat OpenShift clusters", width=700]
--

The Red Hat OpenShift clusters in both networks have a replica of the AMQ message queue and they use a message broker to manage it. When the business applications need to request data fom the SCADA devices, they create a message in the AMQ queue in the enterprise zone that is replicated inn the queue in the electric zone. That message is read by the application it is aimed for and the application will retrieve the needed data from the relevant SCADA device, then it will put it in the AMQ queue and the message will be replicated back to the one in the enterprise zone and finally read by the business app that originated the request.

== Download diagrams
View and download all of the diagrams above in our open source tooling site.
--
https://www.redhat.com/architect/portfolio/tool/index.html?#gitlab.com/osspa/portfolio-architecture-examples/-/raw/main/diagrams/scada-interface.drawio[[Open Diagrams]]
--

== Provide feedback
You can offer to help correct or enhance this architecture by filing an https://gitlab.com/osspa/portfolio-architecture-examples/-/blob/main/telco-5g-with-hyperscalers.adoc[issue or submitting a merge request against this Portfolio Architecture product in our GitLab repositories].
